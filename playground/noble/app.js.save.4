const Noble = require("noble");
const BeaconScanner = require("node-beacon-scanner");
const Gpio = require('onoff').Gpio;

const led = new Gpio(10, 'out')

var scanner = new BeaconScanner();

scanner.onadvertisement = (advertisement) => {
    var beacon = advertisement["iBeacon"];
    if (beacon){
    	beacon.rssi = advertisement["rssi"];
    	//console.log(JSON.stringify(beacon, null, "    "))
	if (beacon.rssi < -51){
	}
	else{
    		console.log(beacon.rssi)
	}
    }
};

scanner.startScan().then(() => {
    console.log("Scanning for BLE devices...")  ;
}).catch((error) => {
    console.error(error);
});
